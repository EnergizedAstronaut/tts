<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Apple TTS · Sample Explorer</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Mono:wght@300;400;500;600&family=IBM+Plex+Sans:wght@300;400;500&display=swap" rel="stylesheet">
<style>
  :root {
    --bg:       #0d0f10;
    --bg2:      #141618;
    --bg3:      #1c1f22;
    --border:   #2a2e33;
    --amber:    #f0a500;
    --amber-dim:#7a5400;
    --green:    #3ddc84;
    --green-dim:#1d5c3a;
    --text:     #c8cdd4;
    --text-dim: #5a6270;
    --text-hi:  #e8ecf1;
    --red:      #e05c5c;
    --blue:     #5b9cf6;
  }

  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'IBM Plex Sans', sans-serif;
    font-size: 13px;
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* ─── SCANLINES OVERLAY ─────────────────────────── */
  body::before {
    content: '';
    position: fixed; inset: 0;
    background: repeating-linear-gradient(
      0deg,
      transparent,
      transparent 2px,
      rgba(0,0,0,0.08) 2px,
      rgba(0,0,0,0.08) 4px
    );
    pointer-events: none;
    z-index: 9999;
  }

  /* ─── HEADER ─────────────────────────────────────── */
  header {
    background: var(--bg2);
    border-bottom: 1px solid var(--border);
    padding: 0 24px;
    height: 56px;
    display: flex;
    align-items: center;
    gap: 16px;
    position: sticky;
    top: 0;
    z-index: 100;
  }

  .logo {
    font-family: 'IBM Plex Mono', monospace;
    font-weight: 600;
    font-size: 13px;
    color: var(--amber);
    letter-spacing: 0.12em;
    text-transform: uppercase;
    display: flex;
    align-items: center;
    gap: 8px;
    white-space: nowrap;
  }
  .logo-dot { width: 7px; height: 7px; border-radius: 50%; background: var(--amber); animation: pulse 2s infinite; }
  @keyframes pulse { 0%,100%{opacity:1} 50%{opacity:0.3} }

  .divider { width: 1px; height: 24px; background: var(--border); }

  .stats-bar {
    display: flex;
    gap: 20px;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
  }
  .stat span { color: var(--text-hi); }

  /* ─── LAYOUT ─────────────────────────────────────── */
  .layout {
    display: grid;
    grid-template-columns: 260px 1fr 320px;
    height: calc(100vh - 56px);
  }

  /* ─── LEFT SIDEBAR ───────────────────────────────── */
  .sidebar {
    border-right: 1px solid var(--border);
    background: var(--bg2);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .sidebar-section {
    padding: 14px 16px 10px;
    border-bottom: 1px solid var(--border);
  }

  .sidebar-label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--text-dim);
    margin-bottom: 10px;
  }

  /* Search */
  .search-wrap {
    position: relative;
    display: flex;
    align-items: center;
  }
  .search-icon {
    position: absolute; left: 10px;
    color: var(--text-dim);
    font-size: 13px;
    pointer-events: none;
  }
  #searchInput {
    width: 100%;
    background: var(--bg3);
    border: 1px solid var(--border);
    color: var(--text-hi);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 12px;
    padding: 8px 10px 8px 32px;
    outline: none;
    transition: border-color 0.2s;
  }
  #searchInput:focus { border-color: var(--amber); }
  #searchInput::placeholder { color: var(--text-dim); }

  .search-count {
    position: absolute; right: 10px;
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: var(--amber);
  }

  /* Category filters */
  .filters { display: flex; flex-direction: column; gap: 4px; }

  .filter-btn {
    background: none;
    border: 1px solid transparent;
    color: var(--text-dim);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    padding: 7px 10px;
    text-align: left;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: space-between;
    transition: all 0.15s;
  }
  .filter-btn:hover { color: var(--text); border-color: var(--border); background: var(--bg3); }
  .filter-btn.active { color: var(--amber); border-color: var(--amber-dim); background: rgba(240,165,0,0.06); }
  .filter-count {
    font-size: 10px;
    background: var(--bg3);
    padding: 1px 6px;
    border-radius: 2px;
    color: var(--text-dim);
  }
  .filter-btn.active .filter-count { background: var(--amber-dim); color: var(--amber); }

  /* Sort options */
  .sort-row { display: flex; gap: 4px; }
  .sort-btn {
    background: none;
    border: 1px solid var(--border);
    color: var(--text-dim);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    padding: 5px 8px;
    cursor: pointer;
    flex: 1;
    text-align: center;
    transition: all 0.15s;
  }
  .sort-btn:hover { color: var(--text); border-color: var(--text-dim); }
  .sort-btn.active { color: var(--amber); border-color: var(--amber); }

  /* ─── CENTER PANEL ───────────────────────────────── */
  .main-panel {
    display: flex;
    flex-direction: column;
    overflow: hidden;
    background: var(--bg);
  }

  .panel-header {
    height: 40px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    padding: 0 20px;
    gap: 12px;
    background: var(--bg2);
    flex-shrink: 0;
  }
  .panel-title {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }
  .result-pill {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: var(--amber);
    background: rgba(240,165,0,0.1);
    border: 1px solid var(--amber-dim);
    padding: 2px 8px;
  }

  /* Sample list */
  #sampleList {
    flex: 1;
    overflow-y: auto;
    padding: 0;
  }
  #sampleList::-webkit-scrollbar { width: 6px; }
  #sampleList::-webkit-scrollbar-track { background: var(--bg); }
  #sampleList::-webkit-scrollbar-thumb { background: var(--border); }

  .sample-row {
    display: grid;
    grid-template-columns: 32px 72px 80px 1fr 56px;
    align-items: center;
    gap: 0;
    border-bottom: 1px solid rgba(42,46,51,0.6);
    padding: 0 16px;
    height: 52px;
    cursor: pointer;
    transition: background 0.1s;
    position: relative;
  }
  .sample-row:hover { background: var(--bg2); }
  .sample-row.active {
    background: rgba(240,165,0,0.07);
    border-left: 2px solid var(--amber);
    padding-left: 14px;
  }
  .sample-row.playing { background: rgba(61,220,132,0.05); border-left: 2px solid var(--green); padding-left: 14px; }

  .row-num {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
  }
  .row-id {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .row-cat {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }
  .cat-exclamations { color: var(--red); }
  .cat-questions { color: var(--blue); }
  .cat-statements { color: var(--green); }
  .cat-common_phrases { color: #c084fc; }

  .row-text {
    font-size: 12px;
    color: var(--text);
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    padding: 0 12px;
  }
  .row-text mark {
    background: rgba(240,165,0,0.25);
    color: var(--amber);
    font-weight: 500;
  }
  .row-dur {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: var(--text-dim);
    text-align: right;
  }

  /* Play button overlay on hover */
  .play-icon {
    position: absolute;
    left: 16px; top: 50%;
    transform: translateY(-50%);
    width: 20px; height: 20px;
    display: none;
    align-items: center;
    justify-content: center;
    background: var(--amber);
    color: #000;
    font-size: 8px;
  }
  .sample-row:hover .play-icon { display: flex; }
  .sample-row:hover .row-num { opacity: 0; }
  .sample-row.playing .play-icon { display: flex; background: var(--green); animation: playPulse 0.8s infinite; }
  .sample-row.playing .row-num { opacity: 0; }
  @keyframes playPulse { 0%,100%{opacity:1} 50%{opacity:0.5} }

  /* Empty state */
  .empty-state {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100%;
    gap: 8px;
    color: var(--text-dim);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 12px;
  }
  .empty-glyph { font-size: 32px; opacity: 0.3; }

  /* ─── RIGHT PANEL ─────────────────────────────────── */
  .detail-panel {
    border-left: 1px solid var(--border);
    background: var(--bg2);
    display: flex;
    flex-direction: column;
    overflow: hidden;
  }

  .detail-header {
    height: 40px;
    border-bottom: 1px solid var(--border);
    display: flex;
    align-items: center;
    padding: 0 16px;
    flex-shrink: 0;
  }
  .detail-title {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    color: var(--text-dim);
    text-transform: uppercase;
    letter-spacing: 0.1em;
  }

  .detail-body {
    flex: 1;
    overflow-y: auto;
    padding: 16px;
  }
  .detail-body::-webkit-scrollbar { width: 4px; }
  .detail-body::-webkit-scrollbar-thumb { background: var(--border); }

  .detail-empty {
    height: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    color: var(--text-dim);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    gap: 6px;
  }

  /* Detail fields */
  .d-field { margin-bottom: 16px; }
  .d-label {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 9px;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--text-dim);
    margin-bottom: 5px;
  }
  .d-value {
    font-size: 13px;
    color: var(--text-hi);
    line-height: 1.5;
  }
  .d-mono {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    color: var(--text);
  }

  /* Waveform viz */
  .waveform-canvas {
    width: 100%;
    height: 48px;
    background: var(--bg3);
    border: 1px solid var(--border);
    display: block;
    margin-bottom: 16px;
  }

  /* Duration bar */
  .dur-bar-wrap {
    background: var(--bg3);
    border: 1px solid var(--border);
    height: 6px;
    margin-bottom: 16px;
    position: relative;
    overflow: hidden;
  }
  .dur-bar-fill {
    height: 100%;
    background: var(--amber);
    transition: width 0.3s;
  }

  /* Phoneme chips */
  .phoneme-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    margin-top: 6px;
  }
  .ph-chip {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    padding: 2px 6px;
    background: var(--bg3);
    border: 1px solid var(--border);
    color: var(--text);
  }
  .ph-chip.word-boundary {
    background: rgba(240,165,0,0.08);
    border-color: var(--amber-dim);
    color: var(--amber);
  }
  .ph-chip.stress-primary { border-color: #5b9cf6; color: #5b9cf6; background: rgba(91,156,246,0.08); }
  .ph-chip.stress-secondary { border-color: #7dd3fc; color: #7dd3fc; background: rgba(125,211,252,0.06); }

  /* Action buttons */
  .action-row {
    display: flex;
    gap: 8px;
    margin-top: 8px;
    padding-bottom: 12px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 16px;
  }
  .btn {
    flex: 1;
    background: none;
    border: 1px solid var(--border);
    color: var(--text);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    padding: 8px 0;
    cursor: pointer;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 0.08em;
    transition: all 0.15s;
  }
  .btn:hover { border-color: var(--text-dim); color: var(--text-hi); background: var(--bg3); }
  .btn.btn-primary {
    background: var(--amber);
    border-color: var(--amber);
    color: #000;
    font-weight: 600;
  }
  .btn.btn-primary:hover { background: #d4900a; }
  .btn.btn-playing {
    background: var(--green);
    border-color: var(--green);
    color: #000;
    animation: playPulse 1s infinite;
  }

  /* Similar samples */
  .similar-item {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 7px 8px;
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.15s;
    margin-bottom: 3px;
  }
  .similar-item:hover { background: var(--bg3); border-color: var(--border); }
  .sim-score {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: var(--amber);
    width: 28px;
    flex-shrink: 0;
  }
  .sim-text { font-size: 11px; color: var(--text); flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; }

  /* ─── BOTTOM STATUS BAR ──────────────────────────── */
  .status-bar {
    position: fixed;
    bottom: 0; left: 0; right: 0;
    height: 26px;
    background: var(--amber);
    display: flex;
    align-items: center;
    padding: 0 16px;
    gap: 16px;
    z-index: 200;
  }
  .status-item {
    font-family: 'IBM Plex Mono', monospace;
    font-size: 10px;
    color: #000;
    display: flex;
    align-items: center;
    gap: 5px;
  }
  .status-key {
    background: rgba(0,0,0,0.15);
    padding: 0 4px;
    font-weight: 600;
  }
  #statusMsg { flex: 1; text-align: center; font-weight: 500; }

  /* ─── RESPONSIVE ─────────────────────────────────── */
  @media (max-width: 900px) {
    .layout { grid-template-columns: 220px 1fr; }
    .detail-panel { display: none; }
  }
  @media (max-width: 600px) {
    .layout { grid-template-columns: 1fr; }
    .sidebar { display: none; }
  }

  /* ─── TOAST ──────────────────────────────────────── */
  .toast {
    position: fixed;
    top: 70px; right: 20px;
    background: var(--bg3);
    border: 1px solid var(--amber);
    color: var(--amber);
    font-family: 'IBM Plex Mono', monospace;
    font-size: 11px;
    padding: 8px 14px;
    z-index: 9000;
    opacity: 0;
    transform: translateY(-8px);
    transition: all 0.2s;
    pointer-events: none;
  }
  .toast.show { opacity: 1; transform: translateY(0); }
</style>
</head>
<body>

<!-- ─── HEADER ─────────────────────────────────────────── -->
<header>
  <div class="logo">
    <div class="logo-dot"></div>
    APPLE TTS · SAMPLE EXPLORER
  </div>
  <div class="divider"></div>
  <div class="stats-bar">
    <div class="stat">SAMPLES <span id="totalCount">150</span></div>
    <div class="stat">CATEGORIES <span>4</span></div>
    <div class="stat">DURATION <span id="totalDur">–</span></div>
    <div class="stat">CACHE <span id="cacheCount">0</span></div>
  </div>
</header>

<!-- ─── MAIN LAYOUT ────────────────────────────────────── -->
<div class="layout" style="padding-bottom: 26px;">

  <!-- LEFT SIDEBAR -->
  <aside class="sidebar">
    <div class="sidebar-section">
      <div class="sidebar-label">Search</div>
      <div class="search-wrap">
        <span class="search-icon">⌕</span>
        <input type="text" id="searchInput" placeholder="Search samples..." autocomplete="off" spellcheck="false">
        <span class="search-count" id="searchCount"></span>
      </div>
    </div>

    <div class="sidebar-section">
      <div class="sidebar-label">Category</div>
      <div class="filters" id="filterBtns">
        <button class="filter-btn active" data-cat="all">ALL <span class="filter-count" id="fc-all">150</span></button>
        <button class="filter-btn" data-cat="exclamations">EXCLAMATIONS <span class="filter-count" id="fc-exclamations">0</span></button>
        <button class="filter-btn" data-cat="questions">QUESTIONS <span class="filter-count" id="fc-questions">0</span></button>
        <button class="filter-btn" data-cat="statements">STATEMENTS <span class="filter-count" id="fc-statements">0</span></button>
        <button class="filter-btn" data-cat="common_phrases">COMMON PHRASES <span class="filter-count" id="fc-common_phrases">0</span></button>
      </div>
    </div>

    <div class="sidebar-section">
      <div class="sidebar-label">Sort By</div>
      <div class="sort-row">
        <button class="sort-btn active" data-sort="idx">INDEX</button>
        <button class="sort-btn" data-sort="dur">DURATION</button>
        <button class="sort-btn" data-sort="az">A→Z</button>
      </div>
    </div>

    <div class="sidebar-section" style="border-bottom:none; flex:1;">
      <div class="sidebar-label">Keyboard Shortcuts</div>
      <div style="font-family:'IBM Plex Mono',monospace; font-size:10px; color:var(--text-dim); line-height:2;">
        <div><span style="color:var(--text)">↑ ↓</span>  Navigate list</div>
        <div><span style="color:var(--text)">ENTER</span>  Play sample</div>
        <div><span style="color:var(--text)">SPACE</span>  Play / Pause</div>
        <div><span style="color:var(--text)">ESC</span>   Stop / Clear</div>
        <div><span style="color:var(--text)">/</span>    Focus search</div>
      </div>
    </div>
  </aside>

  <!-- CENTER PANEL -->
  <main class="main-panel">
    <div class="panel-header">
      <span class="panel-title">Sample List</span>
      <span class="result-pill" id="resultPill">150 results</span>
    </div>
    <div id="sampleList"></div>
  </main>

  <!-- RIGHT DETAIL PANEL -->
  <aside class="detail-panel">
    <div class="detail-header">
      <span class="detail-title">Sample Detail</span>
    </div>
    <div class="detail-body" id="detailBody">
      <div class="detail-empty">
        <div style="font-size:28px;opacity:0.2;">◈</div>
        <div>Select a sample</div>
      </div>
    </div>
  </aside>

</div>

<!-- ─── STATUS BAR ─────────────────────────────────────── -->
<div class="status-bar">
  <div class="status-item"><span class="status-key">/</span> SEARCH</div>
  <div class="status-item"><span class="status-key">↑↓</span> NAVIGATE</div>
  <div class="status-item"><span class="status-key">↵</span> PLAY</div>
  <div id="statusMsg">Ready · Apple TTS Explorer v1.0</div>
  <div class="status-item"><span id="playingLabel"></span></div>
</div>

<div class="toast" id="toast"></div>

<script>
// ═══════════════════════════════════════════════════════════════
// DATA — all 150 samples embedded
// ═══════════════════════════════════════════════════════════════
const RAW_DATA = [
{"script_title":"exclamations","utterance_name":"rGqqo_0","words":"What do bears like best? Honey!","phone_sequence":"w ^ t # d u # b E r z # l Y k # b E s t # h ^ n i","sentence_estimated_duration":2.19,"paragraph_idx":0},
{"script_title":"exclamations","utterance_name":"rGqqo_2","words":"Yuck! There are lumps in my food!","phone_sequence":"j ^ k # D E r # a r # l ^ m p s # I n # m Y # f u d","sentence_estimated_duration":2.19,"paragraph_idx":2},
{"script_title":"exclamations","utterance_name":"rGqqo_9","words":"The gentleman with the fan exclaimed, "Good morning!"","phone_sequence":"D $ # G E n 146 L m $ n # w I T # D $ # f 145 n # E k s k l J m d # g U d # m A r n I N","sentence_estimated_duration":2.91,"paragraph_idx":9},
{"script_title":"exclamations","utterance_name":"rGqqo_13","words":"His mother gasped, "My goodness. That was dangerous!"","phone_sequence":"h I z # m ^ D e # g 145 s p t # m Y # g U d n I s # D 145 t # w $ z # d J n G $ r $ s","sentence_estimated_duration":3.43,"paragraph_idx":13},
{"script_title":"exclamations","utterance_name":"rGqqo_14","words":"Then the umpire yelled, "Strike three! You're out!"","phone_sequence":"D E n # D i # ^ m P Y r # j E l d # s t r Y k # T r i # j e # @ t","sentence_estimated_duration":3.31,"paragraph_idx":14},
{"script_title":"exclamations","utterance_name":"rGqqo_18","words":"I can't believe I won the lottery!","phone_sequence":"Y # K 145 n t # b I l i v # Y # w ^ n # D $ # l a R e i","sentence_estimated_duration":1.74,"paragraph_idx":18},
{"script_title":"exclamations","utterance_name":"rGqqo_19","words":"That roller coaster was so fun!","phone_sequence":"D 145 t # r O l e K O s t e # w $ z # s O # f ^ n","sentence_estimated_duration":2.01,"paragraph_idx":19},
{"script_title":"exclamations","utterance_name":"rGqqo_21","words":"That was the best movie I've ever seen!","phone_sequence":"D 145 t # w $ z # D $ # b E s t # m u v i # Y v # E v e # s i n","sentence_estimated_duration":2.32,"paragraph_idx":21},
{"script_title":"exclamations","utterance_name":"rGqqo_23","words":"I can't believe you did that!","phone_sequence":"Y # K 145 n t # b I l i v # j u # d I d # D 145 t","sentence_estimated_duration":1.48,"paragraph_idx":23},
{"script_title":"exclamations","utterance_name":"rGqqo_24","words":"Come back inside right now!","phone_sequence":"K ^ m # b 145 k # I n s Y d # r Y t # n @","sentence_estimated_duration":1.69,"paragraph_idx":24},
{"script_title":"exclamations","utterance_name":"rGqqo_25","words":"Ouch! That is really hot!","phone_sequence":"@ C # D 145 R # I z # r i l i # h a t","sentence_estimated_duration":1.87,"paragraph_idx":25},
{"script_title":"exclamations","utterance_name":"rGqqo_29","words":"Aww! That puppy is so tiny and cute!","phone_sequence":"A # D 145 t # P ^ P i # I z # s O # 146 Y n i # 145 n # K j u t","sentence_estimated_duration":2.83,"paragraph_idx":29},
{"script_title":"questions","utterance_name":"YIhoP_4","words":"Is Miami the capital of Florida?","phone_sequence":"I z # m Y 145 m i # D $ # K 145 P $ R L # $ v # f l A r I R $","sentence_estimated_duration":2.03,"paragraph_idx":4},
{"script_title":"questions","utterance_name":"YIhoP_5","words":"Do you know what time the meeting starts?","phone_sequence":"d u # j u # n O # w ^ t # 146 Y m # D $ # m i R I N # s t a r t s","sentence_estimated_duration":1.97,"paragraph_idx":5},
{"script_title":"questions","utterance_name":"YIhoP_6","words":"Could we meet next week on either Thursday or Friday?","phone_sequence":"K U d # w i # m i t # n E k s t # w i k # a n # i D e # T e z d J # A r # f r Y R J","sentence_estimated_duration":3.13,"paragraph_idx":6},
{"script_title":"questions","utterance_name":"YIhoP_9","words":"What if we moved the meeting to next month?","phone_sequence":"w ^ R # I f # w i # m u v d # D $ # m i R I N # 146 $ # n E k s t # m ^ n T","sentence_estimated_duration":2.11,"paragraph_idx":9},
{"script_title":"questions","utterance_name":"YIhoP_10","words":"Is that something you would want to try?","phone_sequence":"I z # D 145 t # s ^ m T I N # j u # w U d # w a n t # 146 $ # 146 r Y","sentence_estimated_duration":1.92,"paragraph_idx":10},
{"script_title":"questions","utterance_name":"YIhoP_11","words":"Isn't she the funniest person you've ever met?","phone_sequence":"I z $ n t # S i # D $ # f ^ n i I s t # P e s $ n # j u v # E v e # m E t","sentence_estimated_duration":2.26,"paragraph_idx":11},
{"script_title":"questions","utterance_name":"YIhoP_14","words":"Were they traveling together?","phone_sequence":"w e # D J # 146 r 145 v L I N # 146 $ g E D e","sentence_estimated_duration":1.46,"paragraph_idx":14},
{"script_title":"questions","utterance_name":"YIhoP_20","words":"Do you know who the president was in nineteen sixty-two?","phone_sequence":"d u # j u # n O # h u # D $ # P r E z I R $ n t # w $ z # I n # n Y n 146 i n # s I k s t i 146 u","sentence_estimated_duration":2.79,"paragraph_idx":20},
{"script_title":"questions","utterance_name":"YIhoP_21","words":"Would you rather go to the beach, or take a hike in the mountains?","phone_sequence":"w U d # j u # r 145 D e # g O # 146 $ # D $ # b i C # A r # 146 J k # $ # h Y k # I n # D $ # m @ n t 164 z","sentence_estimated_duration":3.21,"paragraph_idx":21},
{"script_title":"questions","utterance_name":"YIhoP_25","words":"Did you already eat breakfast?","phone_sequence":"d I d # j u # A l r E R i # i t # b r E k f $ s t","sentence_estimated_duration":1.55,"paragraph_idx":25},
{"script_title":"questions","utterance_name":"YIhoP_26","words":"Are you still hungry?","phone_sequence":"a r # j u # s t I l # h ^ N g r i","sentence_estimated_duration":1.25,"paragraph_idx":26},
{"script_title":"questions","utterance_name":"YIhoP_27","words":"Would you like any toast with your scrambled eggs?","phone_sequence":"w U d # j u # l Y k # E n i # 146 O s t # w I T # j e # s k r 145 m b $ l d # E g z","sentence_estimated_duration":2.37,"paragraph_idx":27},
{"script_title":"questions","utterance_name":"YIhoP_30","words":"I know you play golf, but have you ever tried baseball?","phone_sequence":"Y # n O # j u # P l J # g A l f # b ^ t # h 145 v # j u # E v e # 146 r Y d # b J s b A l","sentence_estimated_duration":3.17,"paragraph_idx":30},
{"script_title":"questions","utterance_name":"YIhoP_32","words":"Can you text me once you get to the restaurant?","phone_sequence":"K 145 n # j u # 146 E k s t # m i # w ^ n s # j u # g E t # 146 $ # D $ # r E s t e a n t","sentence_estimated_duration":2.36,"paragraph_idx":32},
{"script_title":"questions","utterance_name":"YIhoP_34","words":"Are you going to finish those fries?","phone_sequence":"a r # j u # g O I N # 146 $ # f I n I S # D O z # f r Y z","sentence_estimated_duration":1.96,"paragraph_idx":34},
{"script_title":"questions","utterance_name":"YIhoP_35","words":"Can you make popcorn while we're watching the movie?","phone_sequence":"K 145 n # j u # m J k # P a p K A r n # w Y l # w i r # w a C I N # D $ # m u v i","sentence_estimated_duration":2.56,"paragraph_idx":35},
{"script_title":"questions","utterance_name":"YIhoP_37","words":"While I take this call, could you watch my stuff?","phone_sequence":"w Y l # Y # 146 J k # D I s # K A l # K U d # j u # w a C # m Y # s t ^ f","sentence_estimated_duration":2.87,"paragraph_idx":37},
{"script_title":"questions","utterance_name":"YIhoP_39","words":"While you watch TV, do you like to snack?","phone_sequence":"w Y l # j u # w a C # 146 i v i # d u # j u # l Y k # 146 $ # s n 145 k","sentence_estimated_duration":2.42,"paragraph_idx":39},
{"script_title":"questions","utterance_name":"YIhoP_40","words":"Are you ready to go?","phone_sequence":"a r # j u # r E R i # 146 $ # g O","sentence_estimated_duration":1.18,"paragraph_idx":40},
{"script_title":"questions","utterance_name":"YIhoP_43","words":"Did you remember to take out the trash?","phone_sequence":"d I d # j u # r I m E m b e # 146 $ # 146 J k # @ t # D $ # 146 r 145 S","sentence_estimated_duration":2.04,"paragraph_idx":43},
{"script_title":"questions","utterance_name":"YIhoP_47","words":"Could you remind me in twenty minutes?","phone_sequence":"K U d # j u # r i m Y n d # m i # I n # 146 w E n i # m I n I t s","sentence_estimated_duration":1.83,"paragraph_idx":47},
{"script_title":"questions","utterance_name":"YIhoP_48","words":"Can we leave now?","phone_sequence":"K 145 n # w i # l i v # n @","sentence_estimated_duration":1.24,"paragraph_idx":48},
{"script_title":"questions","utterance_name":"YIhoP_56","words":"Do they need a few more minutes?","phone_sequence":"d u # D J # n i R # $ # f j u # m A r # m I n I t s","sentence_estimated_duration":1.70,"paragraph_idx":56},
{"script_title":"questions","utterance_name":"YIhoP_58","words":"Have you finished your homework?","phone_sequence":"h 145 v # j u # f I n I S t # j e # h O m w e k","sentence_estimated_duration":1.64,"paragraph_idx":58},
{"script_title":"questions","utterance_name":"YIhoP_60","words":"Are you ready for the baseball game?","phone_sequence":"a r # j u # r E R i # f e # D $ # b J s b A l # g J m","sentence_estimated_duration":1.76,"paragraph_idx":60},
{"script_title":"questions","utterance_name":"YIhoP_61","words":"Would you please close the door?","phone_sequence":"w U d # j u # P l i z # K l O s # D $ # d A r","sentence_estimated_duration":1.57,"paragraph_idx":61},
{"script_title":"questions","utterance_name":"YIhoP_63","words":"Did you eat all your broccoli?","phone_sequence":"d I d # j u # i R # A l # j e # b r a K $ l i","sentence_estimated_duration":1.58,"paragraph_idx":63},
{"script_title":"questions","utterance_name":"YIhoP_66","words":"Could you come back in about an hour?","phone_sequence":"K U d # j u # K ^ m # b 145 k # I n # $ b @ R # $ n # @ e","sentence_estimated_duration":1.84,"paragraph_idx":66},
{"script_title":"questions","utterance_name":"YIhoP_67","words":"Should you really leave your shoes on the stairs?","phone_sequence":"S U d # j u # r i l i # l i v # j e # S u z # a n # D $ # s t E r z","sentence_estimated_duration":2.22,"paragraph_idx":67},
{"script_title":"questions","utterance_name":"YIhoP_70","words":"Are they a couple now?","phone_sequence":"a r # D J # $ # K ^ P L # n @","sentence_estimated_duration":1.26,"paragraph_idx":70},
{"script_title":"questions","utterance_name":"YIhoP_74","words":"Doesn't she look just like your mother?","phone_sequence":"d ^ z $ n t # S i # l U k # G ^ s t # l Y k # j e # m ^ D e","sentence_estimated_duration":1.88,"paragraph_idx":74},
{"script_title":"questions","utterance_name":"YIhoP_77","words":"Have you ever tried yoga?","phone_sequence":"h 145 v # j u # E v e # 146 r Y d # j O g $","sentence_estimated_duration":1.45,"paragraph_idx":77},
{"script_title":"questions","utterance_name":"YIhoP_79","words":"Are you on your way?","phone_sequence":"a r # j u # a n # j e # w J","sentence_estimated_duration":1.16,"paragraph_idx":79},
{"script_title":"questions","utterance_name":"YIhoP_80","words":"Can you bring these books back to the library?","phone_sequence":"K 145 n # j u # b r I N # D i z # b U k s # b 145 k # 146 $ # D $ # l Y b r E r i","sentence_estimated_duration":2.31,"paragraph_idx":80},
{"script_title":"questions","utterance_name":"YIhoP_87","words":"Have you ever thought about moving to a different country?","phone_sequence":"h 145 v # j u # E v e # T A R # $ b @ t # m u v I N # 146 U # $ # d I f r $ n t # K ^ n 146 r i","sentence_estimated_duration":2.57,"paragraph_idx":87},
{"script_title":"questions","utterance_name":"YIhoP_91","words":"Have you ever sneezed and coughed at the same time?","phone_sequence":"h 145 v # j u # E v e # s n i z d # 145 n # K A f t # 145 t # D $ # s J m # 146 Y m","sentence_estimated_duration":2.88,"paragraph_idx":91},
{"script_title":"questions","utterance_name":"YIhoP_94","words":"Do you remember the dream you had?","phone_sequence":"d u # j u # r I m E m b e # D $ # d r i m # j u # h 145 d","sentence_estimated_duration":1.70,"paragraph_idx":94},
{"script_title":"common_phrases","utterance_name":"YZbVU_3","words":"It's a beautiful day today.","phone_sequence":"I t s # $ # b j u R I f L # d J # 146 $ d J","sentence_estimated_duration":1.52,"paragraph_idx":3},
{"script_title":"common_phrases","utterance_name":"YZbVU_11","words":"I had a great day at the park.","phone_sequence":"Y # h 145 R # $ # g r J t # d J # 145 t # D $ # P a r k","sentence_estimated_duration":1.93,"paragraph_idx":11},
{"script_title":"common_phrases","utterance_name":"YZbVU_12","words":"Grabbing a cup of coffee this afternoon sounds great.","phone_sequence":"g r 145 b I N # $ # K ^ p # $ v # K A f i # D I s # 145 f 146 e n u n # s @ n d z # g r J t","sentence_estimated_duration":2.87,"paragraph_idx":12},
{"script_title":"common_phrases","utterance_name":"YZbVU_14","words":"I couldn't be more excited about my new electric bicycle.","phone_sequence":"Y # K U d 164 t # b i # m A r # E k s Y R I R # $ b @ t # m Y # n u # $ l E k 146 r I k # b Y s I K L","sentence_estimated_duration":2.92,"paragraph_idx":14},
{"script_title":"common_phrases","utterance_name":"YZbVU_15","words":"Pizza is one of my favorite things to eat.","phone_sequence":"P i t s $ # I z # w ^ n # $ v # m Y # f J v r I t # T I N z # 146 U # i t","sentence_estimated_duration":2.20,"paragraph_idx":15},
{"script_title":"common_phrases","utterance_name":"YZbVU_16","words":"The weather looks great for this weekend.","phone_sequence":"D $ # w E D e # l U k s # g r J t # f e # D I s # w i K E n d","sentence_estimated_duration":1.91,"paragraph_idx":16},
{"script_title":"common_phrases","utterance_name":"YZbVU_19","words":"I think we may have met before, a while ago.","phone_sequence":"Y # T I N k # w i # m J # h 145 v # m E t # b $ f A r # $ w Y l # $ g O","sentence_estimated_duration":2.73,"paragraph_idx":19},
{"script_title":"common_phrases","utterance_name":"YZbVU_22","words":"No matter the time of day, I'll happily eat a cookie.","phone_sequence":"n O # m 145 R e # D $ # 146 Y m # $ v # d J # Y l # h 145 P I l i # i R # $ # K U K i","sentence_estimated_duration":3.14,"paragraph_idx":22},
{"script_title":"common_phrases","utterance_name":"YZbVU_28","words":"Gardening makes me appreciate our planet, and our place in it.","phone_sequence":"g a r d $ n I N # m J k s # m i # $ P r i S i J R # a r # P l 145 n I t # 145 n # a r # P l J s # I n # I t","sentence_estimated_duration":3.35,"paragraph_idx":28},
{"script_title":"common_phrases","utterance_name":"YZbVU_31","words":"Let me know if you need any help with that.","phone_sequence":"l E t # m i # n O # I f # j u # n i R # E n i # h E l p # w I T # D 145 t","sentence_estimated_duration":1.92,"paragraph_idx":31},
{"script_title":"common_phrases","utterance_name":"YZbVU_35","words":"I'm happy to just stay in and relax tonight.","phone_sequence":"Y m # h 145 P i # 146 $ # G ^ s t # s t J # I n # 145 n # r I l 145 k s # 146 $ n Y t","sentence_estimated_duration":2.63,"paragraph_idx":35},
{"script_title":"common_phrases","utterance_name":"YZbVU_39","words":"After you gather the ingredients, simply follow the recipe.","phone_sequence":"145 f 146 e # j u # g 145 D e # D i # I n g r i R i $ n t s # s I m P l i # f a l O # D $ # r E s I P i","sentence_estimated_duration":3.24,"paragraph_idx":39},
{"script_title":"statements","utterance_name":"zEoVu_6","words":"About eighty percent of all people are right-footed.","phone_sequence":"$ b @ R # J R i # P e s E n t # $ v # A l # P i P L # a r # r Y t f U R I d","sentence_estimated_duration":2.50,"paragraph_idx":6},
{"script_title":"statements","utterance_name":"zEoVu_12","words":"About two-thirds of the farmers own the land on which they work.","phone_sequence":"$ b @ t # 146 u T e d z # $ v # D $ # f a r m e z # O n # D $ # l 145 n d # a n # w I C # D J # w e k","sentence_estimated_duration":3.13,"paragraph_idx":12},
{"script_title":"statements","utterance_name":"zEoVu_13","words":"According to the nineteen ninety census, it is the largest city.","phone_sequence":"$ K A r d I N # 146 $ # D $ # n Y n 146 i n # n Y n R i # s E n s $ s # I R # I z # D $ # l a r G I s t # s I R i","sentence_estimated_duration":3.01,"paragraph_idx":13},
{"script_title":"statements","utterance_name":"zEoVu_20","words":"At the age of fourteen, he was taken to England to study music.","phone_sequence":"145 t # D i # J G # $ v # f A r 146 i n # h i # w $ z # 146 J K $ n # 146 U # I N g l $ n d # 146 $ # s t ^ R i # m j u z I k","sentence_estimated_duration":3.83,"paragraph_idx":20},
{"script_title":"statements","utterance_name":"zEoVu_21","words":"At the age of sixty-five, Churchill became prime minister.","phone_sequence":"145 t # D i # J G # $ v # s I k s t i f Y v # C e C I l # b i K J m # P r Y m # m I n I s t e","sentence_estimated_duration":3.48,"paragraph_idx":21},
{"script_title":"statements","utterance_name":"zEoVu_22","words":"At the end of the year, the country's finances began to grow rapidly.","phone_sequence":"145 t # D i # E n d # $ v # D $ # j i r # D $ # K ^ n 146 r i z # f Y n 145 n s I z # b i g 145 n # 146 $ # g r O # r 145 P I d l i","sentence_estimated_duration":3.74,"paragraph_idx":22},
{"script_title":"statements","utterance_name":"zEoVu_27","words":"Both countries are members of the union.","phone_sequence":"b O T # K ^ n 146 r i z # a r # m E m b e z # $ v # D $ # j u n j $ n","sentence_estimated_duration":2.21,"paragraph_idx":27},
{"script_title":"statements","utterance_name":"zEoVu_28","words":"Branson became a city in nineteen twelve, and has a mayor-council form of government.","phone_sequence":"b r 145 n s $ n # b i K J m # $ # s I R i # I n # n Y n 146 i n # 146 w E l v # 145 n # h 145 z # $ # m J e K @ n s L # f A r m # $ v # g ^ v e n m $ n t","sentence_estimated_duration":4.60,"paragraph_idx":28},
{"script_title":"statements","utterance_name":"zEoVu_30","words":"Brooklyn is an important industry center, and ranks as one of the nation's leading seaports.","phone_sequence":"b r U K l $ n # I z # $ n # I m P A r t 164 t # I n d $ s t r i # s E n 146 e # 145 n # r 145 N k s # $ z # w ^ n # $ v # D $ # n J S $ n z # l i R I N # s i P A r t s","sentence_estimated_duration":4.68,"paragraph_idx":30},
{"script_title":"statements","utterance_name":"zEoVu_31","words":"But beginning in the mid nineteen sixties, moose and wolf numbers began to fluctuate.","phone_sequence":"b ^ t # b i g I n I N # I n # D $ # m I d # n Y n 146 i n # s I k s t i z # m u s # 145 n # w U l f # n ^ m b e z # b i g 145 n # 146 $ # f l ^ k C u J t","sentence_estimated_duration":4.55,"paragraph_idx":31},
{"script_title":"statements","utterance_name":"zEoVu_37","words":"By nineteen thirty-one, Edison had received one thousand ninety-three patents.","phone_sequence":"b Y # n Y n 146 i n # T e R i w ^ n # E R I s $ n # h 145 d # r i s i v d # w ^ n # T @ z $ n # n Y n 146 i T r i # P 145 t 164 t s","sentence_estimated_duration":4.46,"paragraph_idx":37},
{"script_title":"statements","utterance_name":"zEoVu_40","words":"Communal, business, and personal services form the leading service industry.","phone_sequence":"K $ m j u n L # b I z n I s # 145 n # P e s $ n L # s e v I s I z # f A r m # D $ # l i R I N # s e v I s # I n d $ s t r i","sentence_estimated_duration":3.94,"paragraph_idx":40},
{"script_title":"statements","utterance_name":"zEoVu_44","words":"Desktop publishing began in the mid nineteen eighties.","phone_sequence":"d E s k 146 a p # P ^ b l I S I N # b i g 145 n # I n # D $ # m I d # n Y n 146 i n # J R i z","sentence_estimated_duration":2.86,"paragraph_idx":44},
{"script_title":"statements","utterance_name":"zEoVu_45","words":"Dolphins can talk with one another in different ways.","phone_sequence":"d A l f I n z # K 145 n # 146 A k # w I T # w ^ n # $ n ^ D e # I n # d I f r $ n t # w J z","sentence_estimated_duration":2.84,"paragraph_idx":45},
{"script_title":"statements","utterance_name":"zEoVu_47","words":"During the next twenty years, they explored much of the region.","phone_sequence":"d e I N # D $ # n E k s t # 146 w E n i # j i r z # D J # E k s p l A r d # m ^ C # $ v # D $ # r i G $ n","sentence_estimated_duration":3.25,"paragraph_idx":47},
{"script_title":"statements","utterance_name":"zEoVu_48","words":"During this time, they began weightlifting and other exercise programs.","phone_sequence":"d e I N # D I s # 146 Y m # D J # b i g 145 n # w J t l I f 146 I N # 145 n # ^ D e # E k s e s Y z # P r O g r 145 m z","sentence_estimated_duration":4.09,"paragraph_idx":48},
{"script_title":"statements","utterance_name":"zEoVu_51","words":"Energy use declined in the United States during the early nineteen eighties.","phone_sequence":"E n e G i # j u z # d i K l Y n d # I n # D $ # j u n Y R I d # s t J t s # d e I N # D i # e l i # n Y n 146 i n # J R i z","sentence_estimated_duration":3.75,"paragraph_idx":51},
{"script_title":"statements","utterance_name":"zEoVu_52","words":"Farming accounts for about ten percent of the production.","phone_sequence":"f a r m I N # $ K @ n t s # f e # $ b @ t # 146 E n # P e s E n t # $ v # D $ # P r $ d ^ k S $ n","sentence_estimated_duration":2.71,"paragraph_idx":52},
{"script_title":"statements","utterance_name":"zEoVu_53","words":"In other parts of the country, farming began later.","phone_sequence":"I n # ^ D e # P a r t s # $ v # D $ # K ^ n 146 r i # f a r m I N # b i g 145 n # l J R e","sentence_estimated_duration":2.86,"paragraph_idx":53},
{"script_title":"statements","utterance_name":"zEoVu_55","words":"Farmland covers about sixty-seven percent of the land.","phone_sequence":"f a r m l 145 n d # K ^ v e z # $ b @ t # s I k s t i s E v $ n # P e s E n t # $ v # D $ # l 145 n d","sentence_estimated_duration":3.13,"paragraph_idx":55},
{"script_title":"statements","utterance_name":"zEoVu_58","words":"Fireweeds and other wild flowers grow in many parts of the province.","phone_sequence":"f Y r w i d z # 145 n # ^ D e # w Y l d # f l @ e z # g r O # I n # m E n i # P a r t s # $ v # D $ # P r a v $ n s","sentence_estimated_duration":3.83,"paragraph_idx":58},
{"script_title":"statements","utterance_name":"zEoVu_59","words":"For example, a birch tree gives off about seventy gallons of water a day.","phone_sequence":"f e # I g z 145 m P L # $ # b e C # 146 r i # g I v z # A f # $ b @ t # s E v $ n R i # g 145 l $ n z # $ v # w A R e # $ # d J","sentence_estimated_duration":4.22,"paragraph_idx":59},
{"script_title":"statements","utterance_name":"zEoVu_61","words":"For her work, she was awarded the Nobel Prize in nineteen fifty-nine.","phone_sequence":"f e # h e # w e k # S i # w $ z # $ w A r d I d # D $ # n O b E l P r Y z # I n # n Y n 146 i n # f I f 146 i n Y n","sentence_estimated_duration":3.89,"paragraph_idx":61},
{"script_title":"statements","utterance_name":"zEoVu_63","words":"Glassmaking became important in England during the fifteen hundreds.","phone_sequence":"g l 145 s m J K I N # b i K J m # I m P A r t 164 t # I n # I N g l $ n d # d e I N # D $ # f I f 146 i n # h ^ n d r I d z","sentence_estimated_duration":3.51,"paragraph_idx":63},
{"script_title":"statements","utterance_name":"zEoVu_66","words":"He began his baseball career in the minor leagues in nineteen twenty-eight.","phone_sequence":"h i # b i g 145 n # h I z # b J s b A l # K $ r i r # I n # D $ # m Y n e # l i g z # I n # n Y n 146 i n # 146 w E n i J t","sentence_estimated_duration":3.60,"paragraph_idx":66},
{"script_title":"statements","utterance_name":"zEoVu_68","words":"In eighteen seventy-two, he bought control of the New York Tribune.","phone_sequence":"I n # J 146 i n # s E v $ n R i # 146 u # h i # b A t # K $ n 146 r O l # $ v # D $ # n u # j A r k # 146 r I b j u n","sentence_estimated_duration":3.71,"paragraph_idx":68},
{"script_title":"statements","utterance_name":"zEoVu_70","words":"He earned a law degree from Harvard Law School in nineteen sixty.","phone_sequence":"h i # e n d # $ # l A # d $ g r i # f r $ m # h a r v e d # l A # s k u l # I n # n Y n 146 i n # s I k s t i","sentence_estimated_duration":3.27,"paragraph_idx":70},
{"script_title":"statements","utterance_name":"zEoVu_72","words":"He moved to Chicago in eighteen thirty-three, and made a fortune in real estate.","phone_sequence":"h i # m u v d # 146 $ # S I K a g O # I n # J 146 i n # T e R i T r i # 145 n # m J R # $ # f A r C $ n # I n # r i l # I s t J t","sentence_estimated_duration":4.14,"paragraph_idx":72},
{"script_title":"statements","utterance_name":"zEoVu_73","words":"He next traveled to the southern tip of South America.","phone_sequence":"h i # n E k s t # 146 r 145 v $ l d # 146 $ # D $ # s ^ D e n # 146 I p # $ v # s @ T $ m E r I K $","sentence_estimated_duration":2.80,"paragraph_idx":73},
{"script_title":"statements","utterance_name":"zEoVu_78","words":"He was elected to the British House of Commons in nineteen seventy.","phone_sequence":"h i # w $ z # $ l E k 146 I d # 146 $ # D $ # b r I R I S # h @ s $ v K a m $ n z # I n # n Y n 146 i n # s E v $ n R i","sentence_estimated_duration":3.24,"paragraph_idx":78},
{"script_title":"statements","utterance_name":"zEoVu_79","words":"He was named to the National Baseball Hall of Fame in nineteen seventy.","phone_sequence":"h i # w $ z # n J m d # 146 $ # D $ # n 145 S $ n L # b J s b A l # h A l # $ v # f J m # I n # n Y n 146 i n # s E v $ n R i","sentence_estimated_duration":3.64,"paragraph_idx":79},
{"script_title":"statements","utterance_name":"zEoVu_80","words":"He was one of the most important architects of the sixteen hundreds.","phone_sequence":"h i # w $ z # w ^ n # $ v # D $ # m O s t # I m P A r t 164 t # a r K I R E k t s # $ v # D $ # s I k s 146 i n # h ^ n d r I d z","sentence_estimated_duration":3.21,"paragraph_idx":80},
{"script_title":"statements","utterance_name":"zEoVu_89","words":"In eighteen fifteen, Detroit became a city.","phone_sequence":"I n # J 146 i n # f I f 146 i n # d I 146 r y t # b i K J m # $ # s I R i","sentence_estimated_duration":2.68,"paragraph_idx":89},
{"script_title":"statements","utterance_name":"zEoVu_90","words":"In eighteen twenty-eight, Cooper's Ferry became a city and changed its name to Camden.","phone_sequence":"I n # J 146 i n # 146 w E n i J t # K u P e z # f E r i # b i K J m # $ # s I R i # 145 n # C J n G d # I t s # n J m # 146 $ # K 145 m d $ n","sentence_estimated_duration":4.65,"paragraph_idx":90},
{"script_title":"statements","utterance_name":"zEoVu_91","words":"In nineteen seventy-two, she was elected to the United States congress.","phone_sequence":"I n # n Y n 146 i n # s E v $ n R i # 146 u # S i # w $ z # $ l E k 146 I d # 146 $ # D $ # j u n Y R I d # s t J t s # K A N g r I s","sentence_estimated_duration":4.06,"paragraph_idx":91},
{"script_title":"statements","utterance_name":"zEoVu_94","words":"In the mid eighteen eighties, underground mining began.","phone_sequence":"I n # D $ # m I R # J 146 i n # J R i z # ^ n d e g r @ n d # m Y n I N # b i g 145 n","sentence_estimated_duration":2.85,"paragraph_idx":94},
{"script_title":"statements","utterance_name":"zEoVu_98","words":"It is also a market center for the people of the area.","phone_sequence":"I R # I z # A l s O # $ # m a r K I t # s E n 146 e # f e # D $ # P i P L # $ v # D i # E r i $","sentence_estimated_duration":2.65,"paragraph_idx":98},
{"script_title":"statements","utterance_name":"zEoVu_100","words":"It can weigh up to five and a half pounds.","phone_sequence":"I t # K 145 n # w J # ^ p # 146 $ # f Y v # 145 n # $ # h 145 f # P @ n d z","sentence_estimated_duration":2.42,"paragraph_idx":100},
{"script_title":"statements","utterance_name":"zEoVu_101","words":"It grows from Montana to New Mexico, and west to the Pacific Coast.","phone_sequence":"I t # g r O z # f r $ m # m a n 146 145 n $ # 146 $ # n u m E k s I K O # 145 n # w E s t # 146 $ # D $ # P $ s I f I k # K O s t","sentence_estimated_duration":3.97,"paragraph_idx":101},
{"script_title":"statements","utterance_name":"zEoVu_102","words":"It has a College of Arts and Sciences and a School of Medicine.","phone_sequence":"I t # h 145 z # $ # K a l I G # $ v # a r t s # 145 n # s Y $ n s I z # 145 n # $ # s k u l # $ v # m E R I s $ n","sentence_estimated_duration":3.60,"paragraph_idx":102},
{"script_title":"statements","utterance_name":"zEoVu_103","words":"It has a length of one and a half inches.","phone_sequence":"I t # h 145 z # $ # l E N T # $ v # w ^ n # 145 n # $ # h 145 f # I n C I z","sentence_estimated_duration":2.39,"paragraph_idx":103},
{"script_title":"statements","utterance_name":"zEoVu_104","words":"It has about sixty thousand members in the United States and Canada.","phone_sequence":"I t # h 145 z # $ b @ t # s I k s t i # T @ z $ n # m E m b e z # I n # D $ # j u n Y R I d # s t J t s # 145 n # K 145 n $ R $","sentence_estimated_duration":3.76,"paragraph_idx":104},
{"script_title":"statements","utterance_name":"zEoVu_105","words":"It has an average of about one radio for every four people.","phone_sequence":"I t # h 145 z # $ n # 145 v r I G # $ v # $ b @ t # w ^ n # r J R i O # f e # E v r i # f A r # P i P L","sentence_estimated_duration":3.21,"paragraph_idx":105},
{"script_title":"statements","utterance_name":"zEoVu_106","words":"It has several rivers, most of them in the south.","phone_sequence":"I t # h 145 z # s E v r L # r I v e z # m O s t # $ v # D $ m # I n # D $ # s @ T","sentence_estimated_duration":2.78,"paragraph_idx":106},
{"script_title":"statements","utterance_name":"zEoVu_107","words":"It includes the mountains and the southern part of the Hudson River Valley.","phone_sequence":"I R # I N K l u d z # D $ # m @ n t 164 z # 145 n # D $ # s ^ D e n # P a r t # $ v # D $ # h ^ d s $ n # r I v e # v 145 l i","sentence_estimated_duration":3.60,"paragraph_idx":107},
{"script_title":"statements","utterance_name":"zEoVu_111","words":"It is also used in games.","phone_sequence":"I R # I z # A l s O # j u z d # I n # g J m z","sentence_estimated_duration":1.69,"paragraph_idx":111},
{"script_title":"statements","utterance_name":"zEoVu_114","words":"It's an extension of the nearby sea.","phone_sequence":"I t s # $ n # I k s t E n S $ n # $ v # D $ # n i r b Y # s i","sentence_estimated_duration":2.02,"paragraph_idx":114},
{"script_title":"statements","utterance_name":"zEoVu_115","words":"It's made up of areas in the north and south.","phone_sequence":"I t s # m J R # ^ p # $ v # E r i $ z # I n # D $ # n A r T # 145 n # s @ T","sentence_estimated_duration":2.59,"paragraph_idx":115},
{"script_title":"statements","utterance_name":"zEoVu_118","words":"It's the birthplace of a former French leader.","phone_sequence":"I t s # D $ # b e T P l J s # $ v # $ # f A r m e # f r E n C # l i R e","sentence_estimated_duration":2.29,"paragraph_idx":118},
{"script_title":"statements","utterance_name":"zEoVu_119","words":"It is the state capital and largest city.","phone_sequence":"I R # I z # D $ # s t J t # K 145 P $ R L # 145 n # l a r G I s t # s I R i","sentence_estimated_duration":2.35,"paragraph_idx":119},
{"script_title":"statements","utterance_name":"zEoVu_130","words":"It weighs from five and a half to six ounces.","phone_sequence":"I t # w J z # f r $ m # f Y v # 145 n # $ # h 145 f # 146 $ # s I k s # @ n s I z","sentence_estimated_duration":2.70,"paragraph_idx":130},
{"script_title":"statements","utterance_name":"zEoVu_133","words":"Many people who live in the suburbs work in the city.","phone_sequence":"m E n i # P i P L # h u # l I v # I n # D $ # s ^ b e b z # w e k # I n # D $ # s I R i","sentence_estimated_duration":2.64,"paragraph_idx":133},
{"script_title":"statements","utterance_name":"zEoVu_137","words":"Most of these colleges are part of a large group of schools.","phone_sequence":"m O s t # $ v # D i z # K a l I G I z # a r # P a r R # $ v # $ # l a r G # g r u p # $ v # s k u l z","sentence_estimated_duration":3.27,"paragraph_idx":137},
{"script_title":"statements","utterance_name":"zEoVu_138","words":"Most ranches are found in the western United States and Canada.","phone_sequence":"m O s t # r 145 n C I z # a r # f @ n d # I n # D $ # w E s t e n # j u n Y R I d # s t J t s # 145 n # K 145 n $ R $","sentence_estimated_duration":3.66,"paragraph_idx":138},
{"script_title":"statements","utterance_name":"zEoVu_139","words":"Nearby is Toronto, one of the chief ports on the Great Lakes.","phone_sequence":"n i r b Y # I z # 146 $ r a n O # w ^ n # $ v # D $ # C i f # P A r t s # a n # D $ # g r J t l J k s","sentence_estimated_duration":3.31,"paragraph_idx":139},
{"script_title":"statements","utterance_name":"zEoVu_140","words":"Nuclear plants provide about twenty percent of the state's electric power.","phone_sequence":"n u K l i e # P l 145 n t s # P r $ v Y R # $ b @ t # 146 w E n i # P e s E n t # $ v # D $ # s t J t s # $ l E k 146 r I k # P @ e","sentence_estimated_duration":3.85,"paragraph_idx":140},
{"script_title":"statements","utterance_name":"zEoVu_142","words":"She also is part-owner of one of the nation's airlines.","phone_sequence":"S i # A l s O # I z # P a r 146 @ n e # $ v # w ^ n # $ v # D $ # n J S $ n z # E r l Y n z","sentence_estimated_duration":2.90,"paragraph_idx":142},
{"script_title":"statements","utterance_name":"zEoVu_144","words":"She attended college in Los Angeles.","phone_sequence":"S i # $ 146 E n d I d # K a l I G # I n # l a s # 145 n G $ l I s","sentence_estimated_duration":2.19,"paragraph_idx":144},
{"script_title":"statements","utterance_name":"zEoVu_145","words":"She attended college in New York City in nineteen thirty-one.","phone_sequence":"S i # $ 146 E n d I d # K a l I G # I n # n u # j A r k # s I R i # I n # n Y n 146 i n # T e R i w ^ n","sentence_estimated_duration":3.13,"paragraph_idx":145},
{"script_title":"statements","utterance_name":"zEoVu_146","words":"She became known for her work in that genre of music.","phone_sequence":"S i # b i K J m # n O n # f e # h e # w e k # I n # D 145 t # Z a n r $ # $ v # m j u z I k","sentence_estimated_duration":2.83,"paragraph_idx":146},
{"script_title":"statements","utterance_name":"zEoVu_149","words":"In nineteen thirty-five, she came to the United States.","phone_sequence":"I n # n Y n 146 i n # T e R i f Y v # S i # K J m # 146 $ # D $ # j u n Y R I d # s t J t s","sentence_estimated_duration":3.08,"paragraph_idx":149},
{"script_title":"statements","utterance_name":"zEoVu_150","words":"She first won an election in nineteen eighty-four.","phone_sequence":"S i # f e s t # w ^ n # $ n # $ l E k S $ n # I n # n Y n 146 i n # J R i f A r","sentence_estimated_duration":2.52,"paragraph_idx":150},
{"script_title":"statements","utterance_name":"zEoVu_151","words":"She later served as president of the group.","phone_sequence":"S i # l J R e # s e v d # $ z # P r E z I R $ n t # $ v # D $ # g r u p","sentence_estimated_duration":2.32,"paragraph_idx":151},
{"script_title":"statements","utterance_name":"zEoVu_154","words":"She received a prize for chemistry in nineteen ninety-one for this work.","phone_sequence":"S i # r i s i v d # $ # P r Y z # f e # K E m I s t r i # I n # n Y n 146 i n # n Y n 146 i w ^ n # f e # D I s # w e k","sentence_estimated_duration":3.84,"paragraph_idx":154},
{"script_title":"statements","utterance_name":"zEoVu_156","words":"She returned to the United States in eighteen nineteen.","phone_sequence":"S i # r i 146 e n d # 146 $ # D $ # j u n Y R I d # s t J t s # I n # J 146 i n # n Y n 146 i n","sentence_estimated_duration":2.71,"paragraph_idx":156},
{"script_title":"statements","utterance_name":"zEoVu_158","words":"She studied at Cambridge.","phone_sequence":"S i # s t ^ R i R # 145 t # K J m b r I G","sentence_estimated_duration":1.52,"paragraph_idx":158},
{"script_title":"statements","utterance_name":"zEoVu_160","words":"She was a journalist.","phone_sequence":"S i # w $ z # $ # G e n L I s t","sentence_estimated_duration":1.34,"paragraph_idx":160},
{"script_title":"statements","utterance_name":"zEoVu_163","words":"She was one of the first scientists to propose a theory like that.","phone_sequence":"S i # w $ z # w ^ n # $ v # D $ # f e s t # s Y $ n 146 I s t s # 146 $ # P r $ P O z # $ # T i r i # l Y k # D 145 t","sentence_estimated_duration":3.35,"paragraph_idx":163},
{"script_title":"statements","utterance_name":"zEoVu_164","words":"She was the daughter of a well-known merchant.","phone_sequence":"S i # w $ z # D $ # d A R e # $ v # $ # w E l n O n # m e C $ n t","sentence_estimated_duration":2.17,"paragraph_idx":164},
{"script_title":"statements","utterance_name":"zEoVu_166","words":"Since the early eighteen hundreds, large numbers of tourists have come to Switzerland.","phone_sequence":"s I n s # D i # e l i # J 146 i n # h ^ n d r I d z # l a r G # n ^ m b e z # $ v # 146 u r I s t s # h 145 v # K ^ m # 146 $ # s w I t s e l $ n d","sentence_estimated_duration":4.93,"paragraph_idx":166},
{"script_title":"statements","utterance_name":"zEoVu_167","words":"Since the mid nineteen hundreds, it has expanded rapidly.","phone_sequence":"s I n s # D $ # m I d # n Y n 146 i n # h ^ n d r I d z # I t # h 145 z # I k s p 145 n d I d # r 145 P I d l i","sentence_estimated_duration":3.51,"paragraph_idx":167},
{"script_title":"statements","utterance_name":"zEoVu_168","words":"Some kinds of moths have the color of tree bark.","phone_sequence":"s $ m # K Y n d z # $ v # m A T s # h 145 v # D $ # K ^ l e # $ v # 146 r i # b a r k","sentence_estimated_duration":2.61,"paragraph_idx":168},
{"script_title":"statements","utterance_name":"zEoVu_169","words":"Some of these trials are conducted in a lab.","phone_sequence":"s $ m # $ v # D i z # 146 r Y l z # a r # K $ n d ^ k 146 I R # I n # $ # l 145 b","sentence_estimated_duration":2.43,"paragraph_idx":169},
{"script_title":"statements","utterance_name":"zEoVu_171","words":"The campus has programs in such areas as business management, teaching, and nursing.","phone_sequence":"D $ # K 145 m P $ s # h 145 z # P r O g r 145 m z # I n # s ^ C # E r i $ z # $ z # b I z n I s # m 145 n I G m $ n t # 146 i C I N # 145 n # n e s I N","sentence_estimated_duration":4.73,"paragraph_idx":171},
{"script_title":"statements","utterance_name":"zEoVu_172","words":"The city also has a large number of people from other countries living there.","phone_sequence":"D $ # s I R i # A l s O # h 145 z # $ # l a r G # n ^ m b e # $ v # P i P L # f r $ m # ^ D e # K ^ n 146 r i z # l I v I N # D E r","sentence_estimated_duration":3.79,"paragraph_idx":172},
{"script_title":"statements","utterance_name":"zEoVu_173","words":"The city covers about forty square miles, in the middle of a rich farming area.","phone_sequence":"D $ # s I R i # K ^ v e z # $ b @ t # f A r R i # s k w E r # m Y l z # I n # D $ # m I R L # $ v # $ # r I C # f a r m I N # E r i $","sentence_estimated_duration":4.31,"paragraph_idx":173},
{"script_title":"statements","utterance_name":"zEoVu_186","words":"The river forms part of the border between the French and Dutch regions.","phone_sequence":"D $ # r I v e # f A r m z # P a r R # $ v # D $ # b A r d e # b i 146 w i n # D $ # f r E n C # 145 n # d ^ C # r i G $ n z","sentence_estimated_duration":3.92,"paragraph_idx":186},
{"script_title":"statements","utterance_name":"zEoVu_188","words":"The technical name for the local species is different from that of the common clover.","phone_sequence":"D $ # 146 E k n I K L # n J m # f e # D $ # l O K L # s p i S i z # I z # d I f r $ n t # f r $ m # D 145 R # $ v # D $ # K a m $ n # K l O v e","sentence_estimated_duration":4.01,"paragraph_idx":188},
{"script_title":"statements","utterance_name":"zEoVu_190","words":"The Wales airport lies outside the edge of the city.","phone_sequence":"D $ # w J l z # E r P A r t # l Y z # @ t s Y d # D i # E G # $ v # D $ # s I R i","sentence_estimated_duration":2.64,"paragraph_idx":190},
{"script_title":"statements","utterance_name":"zEoVu_191","words":"Then the shells sink to the bottom of the sea.","phone_sequence":"D E n # D $ # S E l z # s I N k # 146 $ # D $ # b a R $ m # $ v # D $ # s i","sentence_estimated_duration":2.29,"paragraph_idx":191},
{"script_title":"statements","utterance_name":"zEoVu_192","words":"These findings led to the creation of the radio and other devices.","phone_sequence":"D i z # f Y n d I N z # l E d # 146 $ # D $ # K r i J S $ n # $ v # D $ # r J R i O # 145 n # ^ D e # d $ v Y s $ z","sentence_estimated_duration":3.68,"paragraph_idx":192},
{"script_title":"statements","utterance_name":"zEoVu_193","words":"These powders are the most widely used type.","phone_sequence":"D i z # P @ R e z # a r # D $ # m O s t # w Y d l i # j u z d # 146 Y p","sentence_estimated_duration":2.48,"paragraph_idx":193},
{"script_title":"statements","utterance_name":"zEoVu_194","words":"These specialists manage natural habitats for the benefit of plants and animals.","phone_sequence":"D i z # s p E S $ l I s t s # m 145 n I G # n 145 C $ r L # h 145 b I R 145 t s # f e # D $ # b E n $ f I R # $ v # P l 145 n t s # 145 n # 145 n I m $ l z","sentence_estimated_duration":4.35,"paragraph_idx":194},
{"script_title":"statements","utterance_name":"zEoVu_202","words":"They make up about seven percent of the people in the area.","phone_sequence":"D J # m J k # ^ p # $ b @ t # s E v $ n # P e s E n t # $ v # D $ # P i P L # I n # D i # E r i $","sentence_estimated_duration":2.85,"paragraph_idx":202},
{"script_title":"statements","utterance_name":"zEoVu_203","words":"They visited Europe and the Middle East.","phone_sequence":"D J # v I z I R I d # j e $ p # 145 n # D $ # m I R L i s t","sentence_estimated_duration":2.07,"paragraph_idx":203},
{"script_title":"statements","utterance_name":"zEoVu_206","words":"This is a small island located about three miles off the coast of northern England.","phone_sequence":"D I s # I z # $ # s m A l # Y l $ n d # l O K J R I R # $ b @ t # T r i # m Y l z # A f # D $ # K O s t # $ v # n A r D e n # I N g l $ n d","sentence_estimated_duration":4.69,"paragraph_idx":206},
{"script_title":"statements","utterance_name":"zEoVu_207","words":"This is the common name of a group of plants with large, handsome flowers.","phone_sequence":"D I s # I z # D $ # K a m $ n # n J m # $ v # $ # g r u p # $ v # P l 145 n t s # w I T # l a r G # h 145 n s $ m # f l @ e z","sentence_estimated_duration":4.14,"paragraph_idx":207},
{"script_title":"statements","utterance_name":"zEoVu_208","words":"In the field of chemical physics, Tommy was a pioneer.","phone_sequence":"I n # D $ # f i l d # $ v # K E m I K L # f I z I k s # 146 a m i # w $ z # $ # P Y $ n i r","sentence_estimated_duration":3.29,"paragraph_idx":208},
{"script_title":"statements","utterance_name":"zEoVu_210","words":"Two of them erupted in the seventeen hundreds.","phone_sequence":"146 u # $ v # D $ m # i r ^ p 146 I R # I n # D $ # s E v I n 146 i n # h ^ n d r I d z","sentence_estimated_duration":2.33,"paragraph_idx":210}
];

// ═══════════════════════════════════════════════════════════════
// PERFORMANCE OPTIMIZATIONS
// ═══════════════════════════════════════════════════════════════

// 1. Pre-built inverted index for O(1) word-lookup search
const INDEX = (() => {
  const map = new Map();
  RAW_DATA.forEach((s, i) => {
    const words = s.words.toLowerCase().replace(/[^a-z0-9 ]/g, '').split(/\s+/);
    words.forEach(w => {
      if (w.length < 2) return;
      if (!map.has(w)) map.set(w, new Set());
      map.get(w).add(i);
    });
  });
  return map;
})();

// 2. Audio cache — stores synthesized utterances by uid
const AUDIO_CACHE = new Map();

// 3. Pre-compute stats
const CATS = {};
let TOTAL_DUR = 0;
RAW_DATA.forEach(s => {
  CATS[s.script_title] = (CATS[s.script_title] || 0) + 1;
  TOTAL_DUR += s.sentence_estimated_duration;
});

// ═══════════════════════════════════════════════════════════════
// STATE
// ═══════════════════════════════════════════════════════════════
let state = {
  filter: 'all',
  sort: 'idx',
  query: '',
  selected: null,
  playing: null,
  results: [...RAW_DATA]
};

// ═══════════════════════════════════════════════════════════════
// OPTIMIZED SEARCH — uses inverted index
// ═══════════════════════════════════════════════════════════════
function fastSearch(query) {
  if (!query.trim()) return null; // null = no filter
  const terms = query.toLowerCase().replace(/[^a-z0-9 ]/g, '').split(/\s+/).filter(t => t.length > 1);
  if (!terms.length) return new Set();

  // Score each sample
  const scores = new Map();
  terms.forEach(term => {
    // Exact word matches via index
    INDEX.forEach((idxSet, word) => {
      if (word.includes(term)) {
        const weight = word === term ? 2 : 1;
        idxSet.forEach(i => scores.set(i, (scores.get(i) || 0) + weight));
      }
    });
  });

  // Also check for phrase match in original text
  const qLow = query.toLowerCase();
  RAW_DATA.forEach((s, i) => {
    if (s.words.toLowerCase().includes(qLow)) {
      scores.set(i, (scores.get(i) || 0) + 5); // boost exact phrase
    }
  });

  return scores;
}

// ═══════════════════════════════════════════════════════════════
// FILTER + SORT
// ═══════════════════════════════════════════════════════════════
function applyFilters() {
  let pool = RAW_DATA;

  // Category filter
  if (state.filter !== 'all') {
    pool = pool.filter(s => s.script_title === state.filter);
  }

  // Search
  let scores = null;
  if (state.query.trim()) {
    scores = fastSearch(state.query);
    if (scores && scores.size > 0) {
      const allIdxMap = new Map(RAW_DATA.map((s, i) => [s.utterance_name, i]));
      pool = pool.filter(s => {
        const globalIdx = allIdxMap.get(s.utterance_name);
        return scores.has(globalIdx);
      }).sort((a, b) => {
        const ia = allIdxMap.get(a.utterance_name);
        const ib = allIdxMap.get(b.utterance_name);
        return (scores.get(ib) || 0) - (scores.get(ia) || 0);
      });
    } else if (scores && scores.size === 0) {
      pool = [];
    }
  }

  // Sort (only if no search ranking)
  if (!state.query.trim()) {
    if (state.sort === 'dur') pool = [...pool].sort((a,b) => b.sentence_estimated_duration - a.sentence_estimated_duration);
    else if (state.sort === 'az') pool = [...pool].sort((a,b) => a.words.localeCompare(b.words));
    else pool = [...pool].sort((a,b) => a.paragraph_idx - b.paragraph_idx);
  }

  state.results = pool;
}

// ═══════════════════════════════════════════════════════════════
// RENDER — efficient DOM update
// ═══════════════════════════════════════════════════════════════
function escapeHtml(s) {
  return s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
}

function highlightText(text, query) {
  if (!query.trim()) return escapeHtml(text);
  const esc = query.replace(/[.*+?^${}()|[\]\\]/g, '\\$&');
  return escapeHtml(text).replace(new RegExp(`(${esc})`, 'gi'), '<mark>$1</mark>');
}

function getCatClass(cat) {
  return 'cat-' + cat;
}

function renderList() {
  const list = document.getElementById('sampleList');
  const pill = document.getElementById('resultPill');
  pill.textContent = `${state.results.length} result${state.results.length !== 1 ? 's' : ''}`;

  if (!state.results.length) {
    list.innerHTML = `<div class="empty-state"><div class="empty-glyph">⊘</div><div>No samples match</div></div>`;
    return;
  }

  // Build fragment for performance
  const frag = document.createDocumentFragment();
  state.results.forEach((s, i) => {
    const div = document.createElement('div');
    div.className = 'sample-row' +
      (state.selected === s.utterance_name ? ' active' : '') +
      (state.playing === s.utterance_name ? ' playing' : '');
    div.dataset.uid = s.utterance_name;

    const catShort = s.script_title === 'common_phrases' ? 'phrases' :
                     s.script_title === 'exclamations' ? 'exclam.' :
                     s.script_title === 'statements' ? 'stmt.' : 'quest.';

    div.innerHTML = `
      <div class="play-icon">▶</div>
      <div class="row-num">${String(i+1).padStart(3,'0')}</div>
      <div class="row-id">${s.utterance_name}</div>
      <div class="row-cat ${getCatClass(s.script_title)}">${catShort}</div>
      <div class="row-text">${highlightText(s.words, state.query)}</div>
      <div class="row-dur">${s.sentence_estimated_duration.toFixed(2)}s</div>
    `;
    div.addEventListener('click', () => selectSample(s.utterance_name));
    div.addEventListener('dblclick', () => playSample(s.utterance_name));
    frag.appendChild(div);
  });

  list.innerHTML = '';
  list.appendChild(frag);
}

function renderDetail(uid) {
  const s = RAW_DATA.find(x => x.utterance_name === uid);
  const body = document.getElementById('detailBody');
  if (!s) {
    body.innerHTML = `<div class="detail-empty"><div style="font-size:28px;opacity:0.2">◈</div><div>Select a sample</div></div>`;
    return;
  }

  // Build waveform bars
  const barCount = 48;
  const seed = uid.split('').reduce((a,c) => a + c.charCodeAt(0), 0);
  const bars = Array.from({length: barCount}, (_, i) => {
    const h = 20 + Math.abs(Math.sin((seed * (i+1) * 137) % 100) * 70);
    return h;
  });

  // Parse phonemes
  const phones = s.phone_sequence.split(/\s+/);
  const phoneChips = phones.map(p => {
    let cls = 'ph-chip';
    if (p === '#') cls += ' word-boundary';
    else if (p === '145') cls += ' stress-primary';
    else if (p === '146') cls += ' stress-secondary';
    return `<span class="${cls}">${p === '#' ? '│' : p}</span>`;
  }).join('');

  // Similar samples (same category, different)
  const similar = RAW_DATA
    .filter(x => x.script_title === s.script_title && x.utterance_name !== uid)
    .sort(() => Math.random() - 0.5)
    .slice(0, 4);

  const durPct = Math.min(100, (s.sentence_estimated_duration / 5) * 100);
  const isCached = AUDIO_CACHE.has(uid);
  const isPlaying = state.playing === uid;

  body.innerHTML = `
    <div class="d-field">
      <div class="d-label">Text</div>
      <div class="d-value">${escapeHtml(s.words)}</div>
    </div>

    <!-- Waveform visualization -->
    <div style="display:flex;align-items:flex-end;gap:1.5px;height:48px;background:var(--bg3);border:1px solid var(--border);padding:4px 8px;margin-bottom:16px;overflow:hidden;">
      ${bars.map((h, i) => `<div style="flex:1;height:${h}%;background:${isPlaying ? 'var(--green)' : 'var(--amber)'};opacity:${0.4 + (h/100)*0.6};transition:height 0.3s;animation:${isPlaying ? `waveAnim ${0.3 + i*0.02}s ease infinite alternate` : 'none'}"></div>`).join('')}
    </div>

    <style>
      @keyframes waveAnim { from{transform:scaleY(0.4)} to{transform:scaleY(1)} }
    </style>

    <div class="action-row">
      <button class="btn btn-primary ${isPlaying ? 'btn-playing' : ''}" onclick="playSample('${uid}')" id="playBtn-${uid}">
        ${isPlaying ? '■ STOP' : '▶ PLAY'}
      </button>
      <button class="btn" onclick="copyText('${uid}')" title="Copy text">⎘ COPY</button>
    </div>

    <div class="d-field">
      <div class="d-label">ID · Category · Duration</div>
      <div class="d-mono" style="display:flex;gap:12px;flex-wrap:wrap;">
        <span style="color:var(--amber)">${s.utterance_name}</span>
        <span class="${getCatClass(s.script_title)}">${s.script_title}</span>
        <span>${s.sentence_estimated_duration.toFixed(2)}s</span>
        ${isCached ? '<span style="color:var(--green)">● CACHED</span>' : ''}
      </div>
    </div>

    <!-- Duration bar -->
    <div class="dur-bar-wrap">
      <div class="dur-bar-fill" style="width:${durPct}%"></div>
    </div>

    <div class="d-field">
      <div class="d-label">Phoneme Sequence</div>
      <div class="phoneme-grid">${phoneChips}</div>
    </div>

    <div class="d-field">
      <div class="d-label">Phoneme Count · Word Count</div>
      <div class="d-mono">
        <span style="color:var(--amber)">${phones.filter(p=>p!=='#').length}</span> phonemes &nbsp;·&nbsp;
        <span style="color:var(--blue)">${s.words.split(/\s+/).length}</span> words
      </div>
    </div>

    <div class="d-field">
      <div class="d-label">Similar in Category</div>
      ${similar.map(x => `
        <div class="similar-item" onclick="selectSample('${x.utterance_name}')">
          <span class="sim-score">${x.sentence_estimated_duration.toFixed(1)}s</span>
          <span class="sim-text">${escapeHtml(x.words)}</span>
        </div>
      `).join('')}
    </div>
  `;
}

// ═══════════════════════════════════════════════════════════════
// INTERACTIONS
// ═══════════════════════════════════════════════════════════════
function selectSample(uid) {
  state.selected = uid;
  renderList();
  renderDetail(uid);
  setStatus(`Selected: ${uid}`);
}

function playSample(uid) {
  const s = RAW_DATA.find(x => x.utterance_name === uid);
  if (!s) return;

  // Stop current
  if (state.playing) {
    window.speechSynthesis.cancel();
    const prev = state.playing;
    state.playing = null;
    if (prev === uid) {
      renderList();
      renderDetail(uid);
      setStatus('Stopped');
      document.getElementById('playingLabel').textContent = '';
      return;
    }
  }

  // Check cache
  if (AUDIO_CACHE.has(uid)) {
    setStatus(`▶ Playing (cached): ${s.words.slice(0, 40)}...`);
  } else {
    setStatus(`▶ Synthesizing: ${s.words.slice(0, 40)}...`);
  }

  state.playing = uid;
  document.getElementById('playingLabel').textContent = `▶ ${s.utterance_name}`;
  renderList();
  renderDetail(uid);

  // Web Speech API synthesis
  const utter = new SpeechSynthesisUtterance(s.words);
  utter.lang = 'en-US';
  utter.rate = 1.0;
  utter.pitch = 1.0;

  utter.onend = () => {
    AUDIO_CACHE.set(uid, true); // mark as "cached" (played once)
    document.getElementById('cacheCount').textContent = AUDIO_CACHE.size;
    state.playing = null;
    renderList();
    renderDetail(state.selected);
    document.getElementById('playingLabel').textContent = '';
    setStatus(`Completed: ${uid}`);
  };

  utter.onerror = () => {
    state.playing = null;
    renderList();
    setStatus(`Error playing ${uid}`);
    document.getElementById('playingLabel').textContent = '';
  };

  window.speechSynthesis.speak(utter);
}

function copyText(uid) {
  const s = RAW_DATA.find(x => x.utterance_name === uid);
  if (!s) return;
  navigator.clipboard.writeText(s.words).then(() => showToast('Copied to clipboard'));
}

function showToast(msg) {
  const t = document.getElementById('toast');
  t.textContent = msg;
  t.classList.add('show');
  setTimeout(() => t.classList.remove('show'), 2000);
}

function setStatus(msg) {
  document.getElementById('statusMsg').textContent = msg;
}

// ═══════════════════════════════════════════════════════════════
// EVENT LISTENERS
// ═══════════════════════════════════════════════════════════════

// Search — debounced for performance
let searchTimer;
document.getElementById('searchInput').addEventListener('input', e => {
  clearTimeout(searchTimer);
  searchTimer = setTimeout(() => {
    state.query = e.target.value;
    applyFilters();
    renderList();
    const count = state.results.length;
    document.getElementById('searchCount').textContent = state.query ? count : '';
  }, 80); // 80ms debounce
});

// Category filters
document.getElementById('filterBtns').addEventListener('click', e => {
  const btn = e.target.closest('.filter-btn');
  if (!btn) return;
  document.querySelectorAll('.filter-btn').forEach(b => b.classList.remove('active'));
  btn.classList.add('active');
  state.filter = btn.dataset.cat;
  applyFilters();
  renderList();
  setStatus(`Showing: ${state.filter === 'all' ? 'All categories' : state.filter}`);
});

// Sort buttons
document.querySelectorAll('.sort-btn').forEach(btn => {
  btn.addEventListener('click', () => {
    document.querySelectorAll('.sort-btn').forEach(b => b.classList.remove('active'));
    btn.classList.add('active');
    state.sort = btn.dataset.sort;
    applyFilters();
    renderList();
  });
});

// Keyboard navigation
let focusIdx = -1;
document.addEventListener('keydown', e => {
  const search = document.getElementById('searchInput');
  if (e.key === '/' && document.activeElement !== search) {
    e.preventDefault();
    search.focus();
    return;
  }
  if (e.key === 'Escape') {
    window.speechSynthesis.cancel();
    state.playing = null;
    state.query = '';
    search.value = '';
    applyFilters();
    renderList();
    return;
  }
  if (e.key === 'ArrowDown' || e.key === 'ArrowUp') {
    e.preventDefault();
    const delta = e.key === 'ArrowDown' ? 1 : -1;
    focusIdx = Math.max(0, Math.min(state.results.length - 1, focusIdx + delta));
    const uid = state.results[focusIdx]?.utterance_name;
    if (uid) {
      selectSample(uid);
      // Scroll into view
      document.querySelectorAll('.sample-row')[focusIdx]?.scrollIntoView({ block: 'nearest' });
    }
    return;
  }
  if ((e.key === 'Enter' || e.key === ' ') && document.activeElement !== search) {
    e.preventDefault();
    if (state.selected) playSample(state.selected);
    return;
  }
});

// ═══════════════════════════════════════════════════════════════
// INIT
// ═══════════════════════════════════════════════════════════════
function init() {
  // Update stats
  document.getElementById('totalCount').textContent = RAW_DATA.length;
  document.getElementById('totalDur').textContent = `${(TOTAL_DUR/60).toFixed(1)}min`;

  // Update filter counts
  Object.entries(CATS).forEach(([cat, count]) => {
    const el = document.getElementById(`fc-${cat}`);
    if (el) el.textContent = count;
  });
  document.getElementById('fc-all').textContent = RAW_DATA.length;

  // Initial render
  applyFilters();
  renderList();
  setStatus(`Ready · ${RAW_DATA.length} samples loaded · ${Object.keys(CATS).length} categories`);
}

init();
</script>
</body>
</html>
